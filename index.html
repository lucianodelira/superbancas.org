<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Bol√£o Loteria Federal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="Styles.css" />
  <style>
    body { font-family: Arial, sans-serif; background:#f4f4f4; margin:0; padding:0 }
    header { background:#1d3557; color:#fff; padding:15px; text-align:center }
    .container { padding:20px; max-width:900px; margin:auto }
    .card { background:#fff; padding:20px; border-radius:10px; margin-bottom:20px }
    input, button { padding:10px; width:100%; margin-top:10px }
    button { background:#1d3557; color:#fff; border:none; border-radius:6px; cursor:pointer }
    button:disabled { background:#999 }
    .stats { display:flex; justify-content:space-between; gap:10px }
    .stats div { flex:1; background:#e9ecef; padding:10px; border-radius:8px; text-align:center }
    ul { list-style:none; padding:0 }
    li { padding:8px; border-bottom:1px solid #ddd }
    .hidden { display:none }
  </style>
</head>
<body>
<header>
  <h1>üéüÔ∏è Bol√£o da Loteria Federal</h1>
  <p>Valor da cota: R$ 18,00 | Total: 200 cotas</p>
</header>

<div class="container">

  <div class="card" id="registerCard">
    <h2>Entrar no Bol√£o</h2>
    <input type="text" id="name" placeholder="Seu nome completo" />
    <input type="tel" id="phone" placeholder="Seu telefone (WhatsApp)" />
    <button onclick="startPayment()">Gerar PIX e Participar</button>
  </div>

  <div class="card">
    <h3>Status do Bol√£o</h3>
    <div class="stats">
      <div>
        <strong id="freeCotas">200</strong><br />Dispon√≠veis
      </div>
      <div>
        <strong id="usedCotas">0</strong><br />Ocupadas
      </div>
      <div>
        <strong>200</strong><br />Total
      </div>
    </div>
  </div>

  <div class="card hidden" id="memberArea">
    <h2>Bem-vindo ao Bol√£o</h2>
    <p><strong>Nome:</strong> <span id="memberName"></span></p>
    <p><strong>Telefone:</strong> <span id="memberPhone"></span></p>
    <button onclick="showPalpites()">Ver meu bol√£o</button>
  </div>

  <div class="card hidden" id="palpitesArea">
    <h3>Palpites do Bol√£o</h3>
    <p>(Exemplo ilustrativo ‚Äì n√∫meros oficiais podem ser inseridos manualmente)</p>
    <ul>
      <li>Bilhete: 12345</li>
      <li>Bilhete: 67890</li>
      <li>Bilhete: 54321</li>
    </ul>
  </div>

  <div class="card">
    <h3>üë• Participantes</h3>
    <ul id="participantsList"></ul>
  </div>

</div>

<script src="Modal.js"></script>
<script src="Script.js"></script>
<script>
const MAX_COTAS = 200;

function getParticipants() {
  return JSON.parse(localStorage.getItem('participants') || '[]');
}

function saveParticipants(list) {
  localStorage.setItem('participants', JSON.stringify(list));
}

function updateStats() {
  const list = getParticipants();
  document.getElementById('usedCotas').innerText = list.length;
  document.getElementById('freeCotas').innerText = MAX_COTAS - list.length;
  const ul = document.getElementById('participantsList');
  ul.innerHTML = '';
  list.forEach(p => {
    const li = document.createElement('li');
    li.textContent = p.name + ' - ' + p.phone;
    ul.appendChild(li);
  });
}

function startPayment() {
  const name = document.getElementById('name').value.trim();
  const phone = document.getElementById('phone').value.trim();
  if (!name || !phone) {
    alert('Preencha nome e telefone');
    return;
  }
  localStorage.setItem('pendingUser', JSON.stringify({ name, phone }));
  openPaymentModal();
}

function unlockAccess() {
  const user = JSON.parse(localStorage.getItem('pendingUser'));
  if (!user) return;
  const list = getParticipants();
  if (list.length >= MAX_COTAS) return;
  list.push(user);
  saveParticipants(list);
  localStorage.setItem('member', JSON.stringify(user));
  localStorage.removeItem('pendingUser');
}

function loadMember() {
  const member = JSON.parse(localStorage.getItem('member'));
  if (!member) return;
  document.getElementById('registerCard').classList.add('hidden');
  document.getElementById('memberArea').classList.remove('hidden');
  document.getElementById('memberName').innerText = member.name;
  document.getElementById('memberPhone').innerText = member.phone;
}

function showPalpites() {
  document.getElementById('palpitesArea').classList.toggle('hidden');
}

// Integra√ß√£o: quando o Script.js libera acesso
if (localStorage.getItem('privilegeAccess') === 'true') {
  unlockAccess();
  localStorage.removeItem('privilegeAccess');
}

updateStats();
loadMember();
</script>
</body>
</html>
